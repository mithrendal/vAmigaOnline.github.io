var $e=Object.defineProperty;var He=(n,t,r)=>t in n?$e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var V=(n,t,r)=>(He(n,typeof t!="symbol"?t+"":t,r),r);import{S as Y,i as K,s as q,k as x,l as D,m as C,h as T,p as ie,n as S,b as U,B as H,C as k,o as le,L as oe,X as ce,E as we,a as X,c as O,K as me,_ as te,G as I,H as Se,I as Re,J as ve,f as R,t as v,Z as W,e as he,g as Ae,d as xe,w as P,x as L,y as F,T as De,U as ne,z as N,q as Ve,r as ze}from"../../../chunks/index-f90046fb.js";import{f as se}from"../../../chunks/IconBase.svelte_svelte_type_style_lang-45f58ad4.js";import{p as Ue,aw as We,ax as ye,au as Ye,a2 as Ke,a3 as qe,a4 as je,a5 as Je,a6 as Ze,al as Qe,az as et}from"../../../chunks/navigation-f1d3683a.js";class re{constructor(t=0){V(this,"current",0);V(this,"target",0);V(this,"deltaStep",.005);this.current=t,this.target=t}animates(){return this.current!=this.target}clamped(){return this.current<0?0:this.current>1?1:this.current}set(t,r=25){this.target=t,this.deltaStep=Math.abs(this.target-this.current)/r}move(){this.current+this.deltaStep<=this.target?this.current+=this.deltaStep:this.current-this.deltaStep>=this.target?this.current-=this.deltaStep:this.current=this.target}}const tt=313,Ie=tt,de=Ie,rt=227,ot=228,_e=ot,Z=313,Q=912,nt=18,st=26;class at{constructor(){V(this,"x1",new re(.1));V(this,"y1",new re(.1));V(this,"x2",new re(.9));V(this,"y2",new re(.9))}animates(){return this.x1.animates()||this.y1.animates()||this.x2.animates()||this.y2.animates()}zoomIn(){console.log("zoomIn");const t=nt,r=st+4,o=rt,i=Ie;this.x1.set(t/_e),this.y1.set(r/de),this.x2.set(o/_e),this.y2.set(i/de),console.log("New rect: "+this.x1.target+", "+this.y1.target+", "+this.x2.target+", "+this.y2.target)}zoomOut(){console.log("zoomOut"),this.x1.set(0),this.y1.set(0),this.x2.set(1),this.y2.set(1)}move(){this.x1.move(),this.y1.move(),this.x2.move(),this.y2.move()}}function it(n){let t;return{c(){t=x("canvas"),this.h()},l(r){t=D(r,"CANVAS",{style:!0,class:!0,tabindex:!0}),C(t).forEach(T),this.h()},h(){ie(t,"image-rendering","pixelated"),S(t,"class","w-full h-full"),S(t,"tabindex","-1")},m(r,o){U(r,t,o),n[4](t)},p:H,i:H,o:H,d(r){r&&T(t),n[4](null)}}}function lt(n,t,r){let o,i,a;k(n,Ue,m=>r(22,o=m)),k(n,We,m=>r(23,i=m)),k(n,ye,m=>r(24,a=m));let s,e,c=!0,g=!0,l=0,f=0,h,u,B,E,d,p,w,A,G,y,z;const J=`
    	attribute vec4 aVertexPosition;
    	attribute vec2 aTextureCoord;
    	varying highp vec2 vTextureCoord;
    	void main() {
    		gl_Position = aVertexPosition;
    		vTextureCoord = aTextureCoord;
    	}
   	`,ke=`		
		precision mediump float;

		varying highp vec2 vTextureCoord;
	   	uniform sampler2D u_lfSampler;
	   	uniform sampler2D u_sfSampler;
		uniform float u_lweight;
		uniform float u_sweight;

		void main()
		{
		    vec2 coord = vTextureCoord * vec2(912.0, 626.0);
			vec2 coord2 = vec2(floor(coord.x), floor(coord.y));
			float w; 

			vec4 color;
		    if (mod(coord2.y, 2.0) == 0.0) {
		        // color = vec4(1.0, 0.0, 0.0, 1.0); 
				color = texture2D(u_lfSampler, vTextureCoord);
				w = u_lweight;
		    } else {
		        // color = vec4(1.0, 1.0, 0.0, 1.0); 
				color = texture2D(u_sfSampler, vTextureCoord);
				w = u_sweight;
		    }

		    gl_FragColor = color * vec4(w, w, w, 1.0);
		}
   `,Ce=`		
		precision mediump float;
    
		varying highp vec2 vTextureCoord;
    	uniform sampler2D sampler;
    	void main() {
			gl_FragColor = texture2D(sampler, vTextureCoord);
			/*
			vec2 coord = vec2(floor(gl_FragCoord.x), floor(gl_FragCoord.y));
		    if (mod(coord.y, 2.0) == 0.0) {
		        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
		    } else {
		        gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
		    }
			*/
    	}
   `;function Pe(){console.log("initWebGL()");const m={alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1};if(!(s.getContext("webgl2",m)instanceof WebGL2RenderingContext))throw new Error("vAmiga Online needs WebGL2 to run.");e=s.getContext("webgl2",m),e.disable(e.BLEND),e.disable(e.DEPTH_TEST),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),d=ue(J,ke),p=e.getUniformLocation(d,"u_lweight"),w=e.getUniformLocation(d,"u_sweight"),G=e.getUniformLocation(d,"u_lfSampler"),A=e.getUniformLocation(d,"u_sfSampler"),y=ue(J,Ce),z=e.getUniformLocation(y,"sampler"),e.uniform1i(z,0);const _=new Float32Array([1,1,-1,1,1,-1,-1,-1]);ge(_),ee(y,"aVertexPosition"),ee(d,"aVertexPosition");const b=new Float32Array([.9,.9,.1,.9,.9,.1,.1,.1]);h=ge(b),ee(y,"aTextureCoord"),ee(d,"aTextureCoord"),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),u=ae(Q,Z),B=ae(Q,Z),E=ae(Q,2*Z)}function Le(m,_,b,M){const $=new Float32Array([m,_,b,_,m,M,b,M]);e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferSubData(e.ARRAY_BUFFER,0,$)}function Fe(){const m=s.clientWidth,_=s.clientHeight;(s.width!==m||s.height!==_)&&(r(0,s.width=m,s),r(0,s.height=_,s),console.log("Resizing canvas to "+m+" x "+_))}function ue(m,_){const b=fe(e.VERTEX_SHADER,m),M=fe(e.FRAGMENT_SHADER,_),$=e.createProgram();if(e.attachShader($,b),e.attachShader($,M),e.linkProgram($),!e.getProgramParameter($,e.LINK_STATUS))throw new Error(`Shader link error: ${e.getProgramInfoLog($)}`);return e.useProgram($),$}function fe(m,_){const b=e.createShader(m);if(e.shaderSource(b,_),e.compileShader(b),!e.getShaderParameter(b,e.COMPILE_STATUS))throw new Error(`Shader compile error: ${e.getShaderInfoLog(b)}`);return b}function ae(m,_){const b=e.createTexture();return e.bindTexture(e.TEXTURE_2D,b),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,m,_,0,e.RGBA,e.UNSIGNED_BYTE,null),b}function ge(m){const _=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW),_}function ee(m,_){const b=e.getAttribLocation(m,_);e.enableVertexAttribArray(b),e.vertexAttribPointer(b,2,e.FLOAT,!1,0,0)}function Ne(m){Fe(),Me()}function Be(){Xe(),Oe()}function Me(){const m=Q,_=Z;if(a.poweredOff()){const b=i.noise();g=c,c=!g;const M=new Uint8Array(o.HEAPU8.buffer,b,m*_*4);c?(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,M)):(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,B),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,M))}else{const b=i.getEmulatorTexture();if(g=b.prevLof,c=b.currLof,b.frameNr!=l+1&&b.frameNr==l)return;l=b.frameNr;const M=new Uint8Array(o.HEAPU8.buffer,b.data,m*_*4);c?(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,M)):(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,B),e.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,e.RGBA,e.UNSIGNED_BYTE,M))}}function Xe(){if(c==g)c?(e.useProgram(d),e.uniform1f(p,1),e.uniform1f(w,1),e.uniform1i(G,0),e.uniform1i(A,0)):(e.useProgram(d),e.uniform1f(p,1),e.uniform1f(w,1),e.uniform1i(G,1),e.uniform1i(A,1));else{e.useProgram(d),e.uniform1i(G,1),e.uniform1i(A,0);const _=.5;e.useProgram(d),e.uniform1f(p,f%4>=2?1:_),e.uniform1f(w,f%4>=2?_:1),f+=1}const m=e.createFramebuffer();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,u),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,B),e.bindFramebuffer(e.FRAMEBUFFER,m),e.viewport(0,0,Q,2*Z),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,E,0),e.drawArrays(e.TRIANGLE_STRIP,0,4)}function Oe(){e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,E),e.useProgram(y),e.drawArrays(e.TRIANGLE_STRIP,0,4)}le(()=>{Pe()});function Ge(m){oe[m?"unshift":"push"](()=>{s=m,r(0,s)})}return[s,Le,Ne,Be,Ge]}class ct extends Y{constructor(t){super(),K(this,t,lt,it,q,{updateTextureRect:1,update:2,render:3},null,[-1,-1])}get updateTextureRect(){return this.$$.ctx[1]}get update(){return this.$$.ctx[2]}get render(){return this.$$.ctx[3]}}function ut(n){let t,r,o;return{c(){t=x("textarea"),this.h()},l(i){t=D(i,"TEXTAREA",{style:!0,class:!0}),C(t).forEach(T),this.h()},h(){t.readOnly=!0,ie(t,"resize","none"),ie(t,"font-variant-ligatures","none"),S(t,"class","font-azeret text-base outline-0 text-white bg-gray-500/75 w-full h-full p-2")},m(i,a){U(i,t,a),n[9](t),r||(o=ce(t,"keydown",n[1]),r=!0)},p:H,i:H,o:H,d(i){i&&T(t),n[9](null),r=!1,o()}}}function ft(n,t,r){let o,i,a,s,e,c;k(n,Ye,u=>r(3,o=u)),k(n,Ke,u=>r(4,i=u)),k(n,qe,u=>r(5,a=u)),k(n,je,u=>r(6,s=u)),k(n,Je,u=>r(7,e=u)),k(n,Ze,u=>r(8,c=u));let g=!1,l;le(()=>{console.log("RetroShell: onMount"),r(2,g=!0)});function f(u){if(u.preventDefault(),u.ctrlKey){switch(u.key){case"k":o.pressCut();break;case"a":o.pressHome();break}return}switch(u.key){case"ArrowUp":o.pressUp();break;case"ArrowDown":o.pressDown();break;case"ArrowLeft":o.pressLeft();break;case"ArrowRight":o.pressRight();break;case"Home":o.pressHome();break;case"End":o.pressEnd();break;case"Backspace":o.pressBackspace();break;case"Delete":o.pressDelete();break;case"Enter":u.shiftKey?o.pressShiftReturn():o.pressReturn();break;case"Tab":o.pressTab();break;default:u.key.length==1&&o.pressKey(u.key.charCodeAt(0))}}function h(u){oe[u?"unshift":"push"](()=>{l=u,r(0,l),r(8,c),r(2,g),r(3,o)})}return n.$$.update=()=>{if(n.$$.dirty&269&&c&&g){console.log("MsgUpdateConsole");let u=o.getCursorRel();r(0,l.value=o.getText(),l),l.focus(),l.setSelectionRange(l.value.length+u-1,l.value.length+u),r(0,l.scrollTop=l.scrollHeight,l)}n.$$.dirty&132&&e&&g&&console.log("MsgScriptDone"),n.$$.dirty&68&&s&&g&&console.log("MsgScriptPause"),n.$$.dirty&36&&a&&g&&console.log("MsgScriptAbort"),n.$$.dirty&20&&i&&g&&console.log("MsgScriptWakeup")},[l,f,g,o,i,a,s,e,c,h]}class gt extends Y{constructor(t){super(),K(this,t,ft,ut,q,{})}}function mt(n){let t,r,o,i,a,s,e,c;const g=n[8].default,l=we(g,n,n[7],null);return{c(){t=x("button"),r=x("img"),i=X(),l&&l.c(),this.h()},l(f){t=D(f,"BUTTON",{type:!0,class:!0,id:!0,title:!0});var h=C(t);r=D(h,"IMG",{class:!0,src:!0,alt:!0}),i=O(h),l&&l.l(h),h.forEach(T),this.h()},h(){S(r,"class",""),me(r.src,o=n[5])||S(r,"src",o),S(r,"alt","Power Icon"),S(t,"type","button"),S(t,"class",a="flex-none mx-px w-8 rounded "+n[1]+" p-1 text-white hover:bg-gray-100 hover:scale-100"),S(t,"id",n[6]),S(t,"title",n[4]),t.disabled=n[0],te(t,"hasIcon",n[2]),te(t,"active",n[3])},m(f,h){U(f,t,h),I(t,r),I(t,i),l&&l.m(t,null),s=!0,e||(c=ce(t,"click",n[9]),e=!0)},p(f,[h]){(!s||h&32&&!me(r.src,o=f[5]))&&S(r,"src",o),l&&l.p&&(!s||h&128)&&Se(l,g,f,f[7],s?ve(g,f[7],h,null):Re(f[7]),null),(!s||h&2&&a!==(a="flex-none mx-px w-8 rounded "+f[1]+" p-1 text-white hover:bg-gray-100 hover:scale-100"))&&S(t,"class",a),(!s||h&64)&&S(t,"id",f[6]),(!s||h&16)&&S(t,"title",f[4]),(!s||h&1)&&(t.disabled=f[0]),(!s||h&6)&&te(t,"hasIcon",f[2]),(!s||h&10)&&te(t,"active",f[3])},i(f){s||(R(l,f),s=!0)},o(f){v(l,f),s=!1},d(f){f&&T(t),l&&l.d(f),e=!1,c()}}}function ht(n,t,r){let{$$slots:o={},$$scope:i}=t,{disabled:a=!1}=t,{bgcolor:s="bg-gray-300"}=t,{hasIcon:e=!1}=t,{active:c=!1}=t,{title:g=""}=t,{icon:l=""}=t,{id:f=""}=t;function h(u){W.call(this,n,u)}return n.$$set=u=>{"disabled"in u&&r(0,a=u.disabled),"bgcolor"in u&&r(1,s=u.bgcolor),"hasIcon"in u&&r(2,e=u.hasIcon),"active"in u&&r(3,c=u.active),"title"in u&&r(4,g=u.title),"icon"in u&&r(5,l=u.icon),"id"in u&&r(6,f=u.id),"$$scope"in u&&r(7,i=u.$$scope)},[a,s,e,c,g,l,f,i,o,h]}class j extends Y{constructor(t){super(),K(this,t,ht,mt,q,{disabled:0,bgcolor:1,hasIcon:2,active:3,title:4,icon:5,id:6})}}function dt(n){let t;return{c(){t=x("div"),this.h()},l(r){t=D(r,"DIV",{class:!0}),C(t).forEach(T),this.h()},h(){S(t,"class","w-64")},m(r,o){U(r,t,o)},p:H,i:H,o:H,d(r){r&&T(t)}}}class _t extends Y{constructor(t){super(),K(this,t,null,dt,q,{})}}function bt(n){let t,r,o;const i=n[2].default,a=we(i,n,n[1],null);return{c(){t=x("div"),a&&a.c(),this.h()},l(s){t=D(s,"DIV",{class:!0});var e=C(t);a&&a.l(e),e.forEach(T),this.h()},h(){S(t,"class",r="round "+n[0]+" flex p-2 space-x-1")},m(s,e){U(s,t,e),a&&a.m(t,null),o=!0},p(s,[e]){a&&a.p&&(!o||e&2)&&Se(a,i,s,s[1],o?ve(i,s[1],e,null):Re(s[1]),null),(!o||e&1&&r!==(r="round "+s[0]+" flex p-2 space-x-1"))&&S(t,"class",r)},i(s){o||(R(a,s),o=!0)},o(s){v(a,s),o=!1},d(s){s&&T(t),a&&a.d(s)}}}function pt(n,t,r){let{$$slots:o={},$$scope:i}=t,{bgcolor:a="bg-red-600"}=t;return n.$$set=s=>{"bgcolor"in s&&r(0,a=s.bgcolor),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,o]}class be extends Y{constructor(t){super(),K(this,t,pt,bt,q,{bgcolor:0})}}function pe(n){let t,r,o,i,a,s,e,c;return r=new be({props:{bgcolor:Te,$$slots:{default:[Tt]},$$scope:{ctx:n}}}),i=new _t({}),s=new be({props:{bgcolor:Te,$$slots:{default:[Et]},$$scope:{ctx:n}}}),{c(){t=x("div"),P(r.$$.fragment),o=X(),P(i.$$.fragment),a=X(),P(s.$$.fragment),this.h()},l(g){t=D(g,"DIV",{class:!0});var l=C(t);L(r.$$.fragment,l),o=O(l),L(i.$$.fragment,l),a=O(l),L(s.$$.fragment,l),l.forEach(T),this.h()},h(){S(t,"class","bg-gray-500/80 flex w-screen justify-between p-0")},m(g,l){U(g,t,l),F(r,t,null),I(t,o),F(i,t,null),I(t,a),F(s,t,null),c=!0},p(g,l){const f={};l&4097&&(f.$$scope={dirty:l,ctx:g}),r.$set(f);const h={};l&4101&&(h.$$scope={dirty:l,ctx:g}),s.$set(h)},i(g){c||(R(r.$$.fragment,g),R(i.$$.fragment,g),R(s.$$.fragment,g),De(()=>{e||(e=ne(t,se,{duration:500},!0)),e.run(1)}),c=!0)},o(g){v(r.$$.fragment,g),v(i.$$.fragment,g),v(s.$$.fragment,g),e||(e=ne(t,se,{duration:500},!1)),e.run(0),c=!1},d(g){g&&T(t),N(r),N(i),N(s),g&&e&&e.end()}}}function Tt(n){let t,r,o,i,a,s;return t=new j({props:{id:"home",icon:"icons/homeIcon.png",bgcolor:n[0]}}),t.$on("click",n[6]),o=new j({props:{id:"retroShell",icon:"icons/retroShellIcon.png",bgcolor:n[0]}}),o.$on("click",n[7]),a=new j({props:{id:"monitor",icon:"icons/monitorIcon.png",bgcolor:n[0]}}),a.$on("click",n[8]),{c(){P(t.$$.fragment),r=X(),P(o.$$.fragment),i=X(),P(a.$$.fragment)},l(e){L(t.$$.fragment,e),r=O(e),L(o.$$.fragment,e),i=O(e),L(a.$$.fragment,e)},m(e,c){F(t,e,c),U(e,r,c),F(o,e,c),U(e,i,c),F(a,e,c),s=!0},p(e,c){const g={};c&1&&(g.bgcolor=e[0]),t.$set(g);const l={};c&1&&(l.bgcolor=e[0]),o.$set(l);const f={};c&1&&(f.bgcolor=e[0]),a.$set(f)},i(e){s||(R(t.$$.fragment,e),R(o.$$.fragment,e),R(a.$$.fragment,e),s=!0)},o(e){v(t.$$.fragment,e),v(o.$$.fragment,e),v(a.$$.fragment,e),s=!1},d(e){N(t,e),e&&T(r),N(o,e),e&&T(i),N(a,e)}}}function Et(n){let t,r,o,i,a,s;return t=new j({props:{id:"pause",icon:n[2],bgcolor:n[0]}}),t.$on("click",n[9]),o=new j({props:{id:"reset",icon:"icons/resetIcon.png",bgcolor:n[0]}}),o.$on("click",n[10]),a=new j({props:{id:"power",icon:"icons/powerIcon.png",bgcolor:n[0]}}),a.$on("click",n[11]),{c(){P(t.$$.fragment),r=X(),P(o.$$.fragment),i=X(),P(a.$$.fragment)},l(e){L(t.$$.fragment,e),r=O(e),L(o.$$.fragment,e),i=O(e),L(a.$$.fragment,e)},m(e,c){F(t,e,c),U(e,r,c),F(o,e,c),U(e,i,c),F(a,e,c),s=!0},p(e,c){const g={};c&4&&(g.icon=e[2]),c&1&&(g.bgcolor=e[0]),t.$set(g);const l={};c&1&&(l.bgcolor=e[0]),o.$set(l);const f={};c&1&&(f.bgcolor=e[0]),a.$set(f)},i(e){s||(R(t.$$.fragment,e),R(o.$$.fragment,e),R(a.$$.fragment,e),s=!0)},o(e){v(t.$$.fragment,e),v(o.$$.fragment,e),v(a.$$.fragment,e),s=!1},d(e){N(t,e),e&&T(r),N(o,e),e&&T(i),N(a,e)}}}function wt(n){let t,r,o=n[1]&&pe(n);return{c(){o&&o.c(),t=he()},l(i){o&&o.l(i),t=he()},m(i,a){o&&o.m(i,a),U(i,t,a),r=!0},p(i,[a]){i[1]?o?(o.p(i,a),a&2&&R(o,1)):(o=pe(i),o.c(),R(o,1),o.m(t.parentNode,t)):o&&(Ae(),v(o,1,1,()=>{o=null}),xe())},i(i){r||(R(o),r=!0)},o(i){v(o),r=!1},d(i){o&&o.d(i),i&&T(t)}}}let Te="transparent";function St(n,t,r){let o,i;k(n,Qe,E=>r(5,i=E));let{bgcolor:a="bg-gray-300"}=t,s=!0;function e(){console.log("show"),r(1,s=!0)}function c(){console.log("hide"),r(1,s=!1)}function g(E){W.call(this,n,E)}function l(E){W.call(this,n,E)}function f(E){W.call(this,n,E)}function h(E){W.call(this,n,E)}function u(E){W.call(this,n,E)}function B(E){W.call(this,n,E)}return n.$$set=E=>{"bgcolor"in E&&r(0,a=E.bgcolor)},n.$$.update=()=>{n.$$.dirty&32&&r(2,o=i?"icons/pauseIcon.png":"icons/runIcon.png")},[a,s,o,e,c,i,g,l,f,h,u,B]}class Rt extends Y{constructor(t){super(),K(this,t,St,wt,q,{bgcolor:0,showToolbar:3,hideToolbar:4})}get showToolbar(){return this.$$.ctx[3]}get hideToolbar(){return this.$$.ctx[4]}}function Ee(n){let t,r,o,i;return r=new gt({}),{c(){t=x("div"),P(r.$$.fragment),this.h()},l(a){t=D(a,"DIV",{class:!0});var s=C(t);L(r.$$.fragment,s),s.forEach(T),this.h()},h(){S(t,"class","absolute top-0 left-0 w-full h-full border-none border-red-500 flex-grow overflow-scroll")},m(a,s){U(a,t,s),F(r,t,null),i=!0},i(a){i||(R(r.$$.fragment,a),De(()=>{o||(o=ne(t,se,{},!0)),o.run(1)}),i=!0)},o(a){v(r.$$.fragment,a),o||(o=ne(t,se,{},!1)),o.run(0),i=!1},d(a){a&&T(t),N(r),a&&o&&o.end()}}}function vt(n){let t,r,o,i,a,s,e,c,g,l,f,h,u,B,E={};e=new ct({props:E}),n[5](e);let d=n[2]&&Ee(),p={};return f=new Rt({props:p}),n[6](f),f.$on("click",n[3]),{c(){t=x("body"),r=x("title"),o=Ve("vAmiga Online"),i=X(),a=x("div"),s=x("div"),P(e.$$.fragment),c=X(),d&&d.c(),g=X(),l=x("div"),P(f.$$.fragment),this.h()},l(w){t=D(w,"BODY",{class:!0});var A=C(t);r=D(A,"TITLE",{});var G=C(r);o=ze(G,"vAmiga Online"),G.forEach(T),i=O(A),a=D(A,"DIV",{class:!0});var y=C(a);s=D(y,"DIV",{class:!0});var z=C(s);L(e.$$.fragment,z),c=O(z),d&&d.l(z),z.forEach(T),g=O(y),l=D(y,"DIV",{class:!0});var J=C(l);L(f.$$.fragment,J),J.forEach(T),y.forEach(T),A.forEach(T),this.h()},h(){S(s,"class","border-none w-[912px] h-[626px]"),S(l,"class","absolute top-0 left-0"),S(a,"class","h-screen flex flex-col"),S(t,"class","h-screen bg-black text-white")},m(w,A){U(w,t,A),I(t,r),I(r,o),I(t,i),I(t,a),I(a,s),F(e,s,null),I(s,c),d&&d.m(s,null),I(a,g),I(a,l),F(f,l,null),h=!0,u||(B=ce(t,"mousemove",n[4]),u=!0)},p(w,[A]){const G={};e.$set(G),w[2]?d?A&4&&R(d,1):(d=Ee(),d.c(),R(d,1),d.m(s,null)):d&&(Ae(),v(d,1,1,()=>{d=null}),xe());const y={};f.$set(y)},i(w){h||(R(e.$$.fragment,w),R(d),R(f.$$.fragment,w),h=!0)},o(w){v(e.$$.fragment,w),v(d),v(f.$$.fragment,w),h=!1},d(w){w&&T(t),n[5](null),N(e),d&&d.d(),n[6](null),N(f),u=!1,B()}}}function At(n,t,r){let o,i;k(n,ye,p=>r(8,o=p)),k(n,Ue,p=>r(9,i=p));let a,s,e=!1,c=new at;le(()=>{console.log("onMount()"),r(0,a.enableDrawing=!0,a),c.zoomIn(),window.requestAnimationFrame(g)});function g(p){o!=null?(l(p),f()):console.log("Skipping draw: Store not yet initialized"),window.requestAnimationFrame(g)}function l(p){c.animates()&&(c.move(),a.updateTextureRect(c.x1.current,c.y1.current,c.x2.current,c.y2.current)),a.update(p)}function f(){a.render()}function h(p){let w=p.currentTarget;switch(console.log("id = "+w.id),w.id){case"home":et("/");break;case"retroShell":r(2,e=!e);break;case"monitor":o.getConfig(i.OPT_DMA_DEBUG_ENABLE)?(c.zoomIn(),o.configure(i.OPT_DMA_DEBUG_ENABLE,0)):(c.zoomOut(),o.configure(i.OPT_DMA_DEBUG_ENABLE,1));break;case"pause":o.stopAndGo();break;case"power":o.poweredOn()?o.powerOff():o.run();break;case"reset":o.hardReset();break;default:console.log("Invalid id: "+w.id)}}let u={x:0,y:0};function B(p){u.y>=50&&p.clientY<50&&(console.log("-> SHOW"),s.showToolbar()),u.y<50&&p.clientY>=50&&(console.log("-> HIDE"),s.hideToolbar()),u.x=p.clientX,u.y=p.clientY}function E(p){oe[p?"unshift":"push"](()=>{a=p,r(0,a)})}function d(p){oe[p?"unshift":"push"](()=>{s=p,r(1,s)})}return[a,s,e,h,B,E,d]}class It extends Y{constructor(t){super(),K(this,t,At,vt,q,{})}}export{It as default};
